<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# logger

```go
import "logo/logo"
```

Package logger provides functionality for structured logging.

This file contains the custom text handler implementation which formats log messages in a human\-readable text format with ordered attributes.

Package logger provides functionality for structured logging.

This file contains the JSON handler implementation which formats log messages as JSON objects, with optional pretty\-printing.

Package logger provides a flexible and extensible structured logging framework built on top of Go's standard library slog package. It enhances slog with features like customizable outputs, log levels including TRACE and FATAL, colorized console output, file rotation, log channels, and support for JSON formatting.

This package supports multiple logging backends simultaneously, including console, files \(with rotation via lumberjack\), and channels for custom processing.

Basic usage:

```
logger.Init(
	logger.SetLevel(slog.LevelInfo),
	logger.EnableTrace(),
	logger.AddSource(),
)

log := logger.L()
log.Info("Hello, world!", "user", "gopher")
```

For file logging with rotation:

```
logger.Init(
	logger.AddFileOutput("/path/to/log.file", 10, 3, 30, true),
)
```

For JSON output:

```
logger.Init(
	logger.UseJSON(true), // true for pretty-printed JSON
)
```

Package logger provides functionality for structured logging.

This file contains the channel writer implementation which allows log messages to be sent to a Go channel for asynchronous processing.

Package logger provides functionality for structured logging.

This file contains the console writer implementation with support for colorized and styled output to make log messages more readable in terminal environments.

Package logger provides functionality for structured logging.

This file contains the file writer implementation which supports log rotation through the lumberjack package.

## Index

- [Constants](<#constants>)
- [func Close\(\) error](<#Close>)
- [func Init\(opts ...LoggerOption\)](<#Init>)
- [func NewCustomTextHandler\(out io.Writer, opts \*slog.HandlerOptions\) slog.Handler](<#NewCustomTextHandler>)
- [func NewJSONHandler\(out io.Writer, opts \*slog.HandlerOptions, pretty bool\) slog.Handler](<#NewJSONHandler>)
- [func NewLumberjackWriter\(filename string, maxSize, backups, maxAge int, compress bool\) \*lumberjack.Logger](<#NewLumberjackWriter>)
- [type ChannelWriter](<#ChannelWriter>)
  - [func NewChannelWriter\(ch chan string\) \*ChannelWriter](<#NewChannelWriter>)
  - [func \(cw \*ChannelWriter\) Write\(p \[\]byte\) \(int, error\)](<#ChannelWriter.Write>)
- [type CustomTextHandler](<#CustomTextHandler>)
  - [func \(h \*CustomTextHandler\) Enabled\(ctx context.Context, level slog.Level\) bool](<#CustomTextHandler.Enabled>)
  - [func \(h \*CustomTextHandler\) Handle\(ctx context.Context, r slog.Record\) error](<#CustomTextHandler.Handle>)
  - [func \(h \*CustomTextHandler\) WithAttrs\(attrs \[\]slog.Attr\) slog.Handler](<#CustomTextHandler.WithAttrs>)
  - [func \(h \*CustomTextHandler\) WithGroup\(name string\) slog.Handler](<#CustomTextHandler.WithGroup>)
- [type JSONHandler](<#JSONHandler>)
  - [func \(h \*JSONHandler\) Enabled\(ctx context.Context, level slog.Level\) bool](<#JSONHandler.Enabled>)
  - [func \(h \*JSONHandler\) Handle\(ctx context.Context, r slog.Record\) error](<#JSONHandler.Handle>)
  - [func \(h \*JSONHandler\) WithAttrs\(attrs \[\]slog.Attr\) slog.Handler](<#JSONHandler.WithAttrs>)
  - [func \(h \*JSONHandler\) WithGroup\(name string\) slog.Handler](<#JSONHandler.WithGroup>)
- [type Logger](<#Logger>)
  - [func L\(\) \*Logger](<#L>)
  - [func WithContext\(ctx context.Context\) \*Logger](<#WithContext>)
  - [func \(l \*Logger\) Fatal\(msg string, attrs ...any\)](<#Logger.Fatal>)
  - [func \(l \*Logger\) Trace\(msg string, attrs ...any\)](<#Logger.Trace>)
- [type LoggerOption](<#LoggerOption>)
  - [func AddChannelOutput\(ch chan string\) LoggerOption](<#AddChannelOutput>)
  - [func AddFileOutput\(path string, maxSize, backups, age int, compress bool\) LoggerOption](<#AddFileOutput>)
  - [func AddSource\(\) LoggerOption](<#AddSource>)
  - [func DisableColors\(\) LoggerOption](<#DisableColors>)
  - [func DisableConsole\(\) LoggerOption](<#DisableConsole>)
  - [func EnableTrace\(\) LoggerOption](<#EnableTrace>)
  - [func SetLevel\(level slog.Level\) LoggerOption](<#SetLevel>)
  - [func UseCustomHandler\(h slog.Handler\) LoggerOption](<#UseCustomHandler>)
  - [func UseJSON\(pretty bool\) LoggerOption](<#UseJSON>)
- [type StyledConsoleWriter](<#StyledConsoleWriter>)
  - [func NewStyledConsoleWriter\(w io.Writer\) \*StyledConsoleWriter](<#NewStyledConsoleWriter>)
  - [func \(cw \*StyledConsoleWriter\) Write\(p \[\]byte\) \(int, error\)](<#StyledConsoleWriter.Write>)


## Constants

<a name="LevelTrace"></a>Constants for additional log levels not provided by the standard slog package.

```go
const (
    // LevelTrace is a level below DEBUG for extremely verbose diagnostic information
    LevelTrace slog.Level = slog.LevelDebug - 5

    // LevelFatal is a level above ERROR that indicates a fatal error condition
    // which will cause the application to terminate after logging
    LevelFatal slog.Level = slog.LevelError + 1
)
```

<a name="Close"></a>
## func [Close](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L259>)

```go
func Close() error
```

Close properly closes all resources used by the logger. This ensures that all log messages are flushed and file handles are closed. It should be called before the application exits.

Returns any error encountered while closing resources

<a name="Init"></a>
## func [Init](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L99>)

```go
func Init(opts ...LoggerOption)
```

Init initializes the logger with the given options. It sets up outputs, formats, and handlers based on the provided options. If no options are provided, it defaults to console output in text format.

Options can be combined to customize the logger behavior:

```
logger.Init(
	logger.SetLevel(slog.LevelDebug),
	logger.EnableTrace(),
	logger.AddSource(),
	logger.AddFileOutput("/var/log/app.log", 10, 3, 30, true),
)
```

Parameters:

- opts: A variadic list of LoggerOption functions to configure the logger

<a name="NewCustomTextHandler"></a>
## func [NewCustomTextHandler](<https://github.com/aN0mad/go-logo/blob/main/logo/handler_custom.go#L33>)

```go
func NewCustomTextHandler(out io.Writer, opts *slog.HandlerOptions) slog.Handler
```

NewCustomTextHandler creates a new text handler with ordered attributes.

Parameters:

- out: The io.Writer where log entries will be written
- opts: Handler options including log level and attribute replacements

Returns a slog.Handler implementation

<a name="NewJSONHandler"></a>
## func [NewJSONHandler](<https://github.com/aN0mad/go-logo/blob/main/logo/handler_json.go#L36>)

```go
func NewJSONHandler(out io.Writer, opts *slog.HandlerOptions, pretty bool) slog.Handler
```

NewJSONHandler creates a new JSON handler with optional pretty printing.

Parameters:

- out: The io.Writer where JSON log entries will be written
- opts: Handler options including log level and attribute replacements
- pretty: Whether to format the JSON with indentation for better readability

Returns a slog.Handler implementation

<a name="NewLumberjackWriter"></a>
## func [NewLumberjackWriter](<https://github.com/aN0mad/go-logo/blob/main/logo/writer_file.go#L20>)

```go
func NewLumberjackWriter(filename string, maxSize, backups, maxAge int, compress bool) *lumberjack.Logger
```

NewLumberjackWriter creates a new lumberjack.Logger instance for file logging with rotation capabilities.

Parameters:

- filename: Path to the log file
- maxSize: Maximum size of the log file in megabytes before it's rotated
- backups: Maximum number of old log files to retain
- maxAge: Maximum number of days to retain old log files
- compress: Whether to compress old log files

Returns a configured lumberjack.Logger that implements io.Writer

<a name="ChannelWriter"></a>
## type [ChannelWriter](<https://github.com/aN0mad/go-logo/blob/main/logo/writer_channel.go#L14-L16>)

ChannelWriter is a custom writer that sends log messages to a channel. It implements the io.Writer interface, allowing it to be used with standard logging functions. This is useful for applications that need to collect log messages asynchronously or process them in a different way.

```go
type ChannelWriter struct {
    // contains filtered or unexported fields
}
```

<a name="NewChannelWriter"></a>
### func [NewChannelWriter](<https://github.com/aN0mad/go-logo/blob/main/logo/writer_channel.go#L26>)

```go
func NewChannelWriter(ch chan string) *ChannelWriter
```

NewChannelWriter creates a new ChannelWriter instance. It initializes the writer with the provided channel. The channel should be buffered to handle log messages without blocking.

Parameters:

- ch: A channel of strings that will receive the log messages

Returns a ChannelWriter that implements io.Writer

<a name="ChannelWriter.Write"></a>
### func \(\*ChannelWriter\) [Write](<https://github.com/aN0mad/go-logo/blob/main/logo/writer_channel.go#L38>)

```go
func (cw *ChannelWriter) Write(p []byte) (int, error)
```

Write implements the io.Writer interface for ChannelWriter. It sends the log message to the channel in a non\-blocking way.

Parameters:

- p: The byte slice containing the log message to write

Returns the number of bytes processed and any error encountered. Note that if the channel is full, the message will be dropped but no error is returned.

<a name="CustomTextHandler"></a>
## type [CustomTextHandler](<https://github.com/aN0mad/go-logo/blob/main/logo/handler_custom.go#L20-L24>)

CustomTextHandler is a custom handler that produces text output with ordered attributes. It implements the slog.Handler interface and formats log messages in a consistent, readable format with configurable attribute ordering.

```go
type CustomTextHandler struct {
    // contains filtered or unexported fields
}
```

<a name="CustomTextHandler.Enabled"></a>
### func \(\*CustomTextHandler\) [Enabled](<https://github.com/aN0mad/go-logo/blob/main/logo/handler_custom.go#L52>)

```go
func (h *CustomTextHandler) Enabled(ctx context.Context, level slog.Level) bool
```

Enabled implements Handler.Enabled. It checks if the given log level should be processed based on the configured minimum level.

Parameters:

- ctx: The context for the logging operation
- level: The log level to check

Returns true if the log level should be processed, false otherwise

<a name="CustomTextHandler.Handle"></a>
### func \(\*CustomTextHandler\) [Handle](<https://github.com/aN0mad/go-logo/blob/main/logo/handler_custom.go#L65>)

```go
func (h *CustomTextHandler) Handle(ctx context.Context, r slog.Record) error
```

Handle implements Handler.Handle. It processes a log record and outputs it in text format.

Parameters:

- ctx: The context for the logging operation
- r: The log record to process

Returns any error encountered during formatting or writing

<a name="CustomTextHandler.WithAttrs"></a>
### func \(\*CustomTextHandler\) [WithAttrs](<https://github.com/aN0mad/go-logo/blob/main/logo/handler_custom.go#L158>)

```go
func (h *CustomTextHandler) WithAttrs(attrs []slog.Attr) slog.Handler
```

WithAttrs implements Handler.WithAttrs. It returns a new handler with the given attributes.

Parameters:

- attrs: The attributes to add to the handler

Returns a new handler instance with the attributes

<a name="CustomTextHandler.WithGroup"></a>
### func \(\*CustomTextHandler\) [WithGroup](<https://github.com/aN0mad/go-logo/blob/main/logo/handler_custom.go#L169>)

```go
func (h *CustomTextHandler) WithGroup(name string) slog.Handler
```

WithGroup implements Handler.WithGroup. It returns a handler that adds the given group name to the attribute key path.

Parameters:

- name: The group name

Returns a handler that adds the group name to the attribute key path

<a name="JSONHandler"></a>
## type [JSONHandler](<https://github.com/aN0mad/go-logo/blob/main/logo/handler_json.go#L21-L26>)

JSONHandler is a custom handler that produces JSON output with configurable formatting. It implements the slog.Handler interface and supports ordering attributes and pretty printing options.

```go
type JSONHandler struct {
    // contains filtered or unexported fields
}
```

<a name="JSONHandler.Enabled"></a>
### func \(\*JSONHandler\) [Enabled](<https://github.com/aN0mad/go-logo/blob/main/logo/handler_json.go#L56>)

```go
func (h *JSONHandler) Enabled(ctx context.Context, level slog.Level) bool
```

Enabled implements slog.Handler interface. It checks if the given log level should be processed based on the configured minimum level.

Parameters:

- ctx: The context for the logging operation
- level: The log level to check

Returns true if the log level should be processed, false otherwise

<a name="JSONHandler.Handle"></a>
### func \(\*JSONHandler\) [Handle](<https://github.com/aN0mad/go-logo/blob/main/logo/handler_json.go#L69>)

```go
func (h *JSONHandler) Handle(ctx context.Context, r slog.Record) error
```

Handle implements slog.Handler interface. It processes a log record and outputs it as JSON.

Parameters:

- ctx: The context for the logging operation
- r: The log record to process

Returns any error encountered during formatting or writing

<a name="JSONHandler.WithAttrs"></a>
### func \(\*JSONHandler\) [WithAttrs](<https://github.com/aN0mad/go-logo/blob/main/logo/handler_json.go#L154>)

```go
func (h *JSONHandler) WithAttrs(attrs []slog.Attr) slog.Handler
```

WithAttrs implements slog.Handler interface. It returns a new handler with the given attributes.

Parameters:

- attrs: The attributes to add to the handler

Returns a new handler instance with the attributes

<a name="JSONHandler.WithGroup"></a>
### func \(\*JSONHandler\) [WithGroup](<https://github.com/aN0mad/go-logo/blob/main/logo/handler_json.go#L166>)

```go
func (h *JSONHandler) WithGroup(name string) slog.Handler
```

WithGroup implements slog.Handler interface. It returns a handler that adds the given group name to the attribute key path.

Parameters:

- name: The group name

Returns a handler that adds the group name to the attribute key path

<a name="Logger"></a>
## type [Logger](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L80-L82>)

Logger is a wrapper around slog.Logger that provides additional functionality. It allows for easy configuration of log outputs, levels, and custom handlers.

```go
type Logger struct {
    *slog.Logger
}
```

<a name="L"></a>
### func [L](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L296>)

```go
func L() *Logger
```

L returns the current logger instance. It is safe to call concurrently and returns the same logger instance. This is the main entry point for logging in the application.

Returns the configured Logger instance

<a name="WithContext"></a>
### func [WithContext](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L309>)

```go
func WithContext(ctx context.Context) *Logger
```

WithContext returns a logger with the request ID from the context. This should be customized based on your context handling for each application.

Parameters:

- ctx: A context.Context that may contain a request\_id value

Returns a Logger that includes the request ID in its attributes if present

<a name="Logger.Fatal"></a>
### func \(\*Logger\) [Fatal](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L362>)

```go
func (l *Logger) Fatal(msg string, attrs ...any)
```

Fatal logs the message and exits the program with status 1. This should be used for critical errors that require immediate termination.

Parameters:

- msg: The message to log
- attrs: Additional attributes to include with the log entry, provided as alternating keys and values

This function does not return as it calls os.Exit\(1\)

<a name="Logger.Trace"></a>
### func \(\*Logger\) [Trace](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L326>)

```go
func (l *Logger) Trace(msg string, attrs ...any)
```

Trace logs with a level below DEBUG and includes a stack trace. This is useful for very detailed diagnostic information typically needed during development or troubleshooting.

Parameters:

- msg: The message to log
- attrs: Additional attributes to include with the log entry, provided as alternating keys and values

<a name="LoggerOption"></a>
## type [LoggerOption](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L76>)

LoggerOption is a functional option type for configuring the logger. This allows for a flexible and extensible way to configure the logger with various options.

```go
type LoggerOption func()
```

<a name="AddChannelOutput"></a>
### func [AddChannelOutput](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L285>)

```go
func AddChannelOutput(ch chan string) LoggerOption
```

AddChannelOutput adds a channel output to the logger. This allows log messages to be sent to a channel for further processing or handling.

Parameters:

- ch: A channel of strings that will receive log messages

Returns a LoggerOption that can be passed to Init\(\)

<a name="AddFileOutput"></a>
### func [AddFileOutput](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L246>)

```go
func AddFileOutput(path string, maxSize, backups, age int, compress bool) LoggerOption
```

AddFileOutput adds a file output to the logger. It uses the Lumberjack package to manage log file rotation. This allows for log files to be rotated based on size, number of backups, and age.

Parameters:

- path: Path to the log file
- maxSize: Maximum size of the log file in megabytes before it's rotated
- backups: Maximum number of old log files to retain
- age: Maximum number of days to retain old log files
- compress: Whether to compress old log files

Returns a LoggerOption that can be passed to Init\(\)

<a name="AddSource"></a>
### func [AddSource](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L204>)

```go
func AddSource() LoggerOption
```

AddSource enables adding source file and line information to log messages. This helps with debugging by showing where each log message originated from.

Returns a LoggerOption that can be passed to Init\(\)

<a name="DisableColors"></a>
### func [DisableColors](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L166>)

```go
func DisableColors() LoggerOption
```

DisableColors disables colored output in console logs. This is useful for environments where ANSI color codes might cause issues, such as when logging to files or in environments that don't support colors.

Returns a LoggerOption that can be passed to Init\(\)

<a name="DisableConsole"></a>
### func [DisableConsole](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L228>)

```go
func DisableConsole() LoggerOption
```

DisableConsole disables the console output. This is useful for applications that do not require console logging, such as background services or daemons.

Returns a LoggerOption that can be passed to Init\(\)

<a name="EnableTrace"></a>
### func [EnableTrace](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L177>)

```go
func EnableTrace() LoggerOption
```

EnableTrace enables trace logging, which is a level below DEBUG. This is useful for capturing detailed information during development or debugging. When trace is enabled, the log level is automatically lowered to include trace messages.

Returns a LoggerOption that can be passed to Init\(\)

<a name="SetLevel"></a>
### func [SetLevel](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L155>)

```go
func SetLevel(level slog.Level) LoggerOption
```

SetLevel sets the log level for the logger. Only messages at or above this level will be logged.

Parameters:

- level: The minimum log level to capture

Returns a LoggerOption that can be passed to Init\(\)

<a name="UseCustomHandler"></a>
### func [UseCustomHandler](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L217>)

```go
func UseCustomHandler(h slog.Handler) LoggerOption
```

UseCustomHandler replaces the handler with a custom slog.Handler. This allows for complete customization of the logging behavior.

Parameters:

- h: A custom slog.Handler implementation

Returns a LoggerOption that can be passed to Init\(\)

<a name="UseJSON"></a>
### func [UseJSON](<https://github.com/aN0mad/go-logo/blob/main/logo/logo.go#L193>)

```go
func UseJSON(pretty bool) LoggerOption
```

UseJSON configures the logger to output logs in JSON format.

Parameters:

- pretty: If true, JSON will be formatted with indentation for better readability. If false, JSON will be compact without extra whitespace.

Returns a LoggerOption that can be passed to Init\(\)

<a name="StyledConsoleWriter"></a>
## type [StyledConsoleWriter](<https://github.com/aN0mad/go-logo/blob/main/logo/writer_console.go#L22-L24>)

StyledConsoleWriter is a custom writer that formats log messages with colors and styles. It implements the io.Writer interface, allowing it to be used with standard logging functions. This is useful for applications that require visually distinct log messages in the console.

```go
type StyledConsoleWriter struct {
    // contains filtered or unexported fields
}
```

<a name="NewStyledConsoleWriter"></a>
### func [NewStyledConsoleWriter](<https://github.com/aN0mad/go-logo/blob/main/logo/writer_console.go#L32>)

```go
func NewStyledConsoleWriter(w io.Writer) *StyledConsoleWriter
```

NewStyledConsoleWriter creates a new StyledConsoleWriter instance.

Parameters:

- w: The underlying io.Writer where formatted output will be written \(typically os.Stdout\)

Returns a StyledConsoleWriter that implements io.Writer

<a name="StyledConsoleWriter.Write"></a>
### func \(\*StyledConsoleWriter\) [Write](<https://github.com/aN0mad/go-logo/blob/main/logo/writer_console.go#L55>)

```go
func (cw *StyledConsoleWriter) Write(p []byte) (int, error)
```

Write implements the io.Writer interface for StyledConsoleWriter. It formats the log message with appropriate styles and colors based on the log level.

Parameters:

- p: The byte slice containing the log message to write

Returns the number of bytes written and any error encountered

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
